<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta name="description" content="吾生也有涯，而知也无涯">
<meta property="og:type" content="website">
<meta property="og:title" content="henry blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="henry blog">
<meta property="og:description" content="吾生也有涯，而知也无涯">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="henry blog">
<meta name="twitter:description" content="吾生也有涯，而知也无涯">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/"/>





  <title>henry blog</title>
  





  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?685707a993a8a29f9a7637ee1b1c42c4";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">henry blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/27/2017-09-27-permission/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="henry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="henry blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/27/2017-09-27-permission/" itemprop="url">权限</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-27T17:19:37+08:00">
                2017-09-27
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/27/2017-09-27-permission/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/09/27/2017-09-27-permission/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="targetSdkVersion"><a href="#targetSdkVersion" class="headerlink" title="targetSdkVersion"></a>targetSdkVersion</h4><p>CompileSdkVersion和minSdkVersion都容易理解，但targetSdkVersion的作用是什么呢？官方解释：</p>
<blockquote>
<p>targetSdkVersion is the main way Android provides forward compatibility</p>
</blockquote>
<p>其实就是为了解决系统为了向前兼容的问题；</p>
<p>举个例子：android N（6.0）增加了运行时权限的功能，为了解决6.0系统之前的兼容问题，会判断targetSdkVersion是否小于23，是的话就会默认给应用需要的全部权限，否的话就会执行新的运行时权限规则；</p>
<h4 id="运行时权限"><a href="#运行时权限" class="headerlink" title="运行时权限"></a>运行时权限</h4><p>android6.0（api23）才增加的新功能；</p>
<p>权限分为正常权限和危险权限；</p>
<h6 id="检查权限："><a href="#检查权限：" class="headerlink" title="检查权限："></a>检查权限：</h6><p>api23之后：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Assume thisActivity is the current activity</span></span><br><span class="line"><span class="keyword">int</span> permissionCheck = ContextCompat.checkSelfPermission(thisActivity,</span><br><span class="line">        Manifest.permission.WRITE_CALENDAR);</span><br></pre></td></tr></table></figure>
<p>api23之前：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> permissionCheck = PermissionChecker.checkSelfPermission(<span class="keyword">this</span>, PERMISSION);</span><br></pre></td></tr></table></figure>
<p>经试验，在anroid6.0以下系统中使用ContextCompat.checkSelfPermission方法无论有没有权限都是返回true，所以应使用v4包中的PermissionChecker.checkSelfPermission方法；</p>
<h6 id="请求权限："><a href="#请求权限：" class="headerlink" title="请求权限："></a>请求权限：</h6><p>activity：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ActivityCompat.requestPermissions(<span class="keyword">this</span>, <span class="keyword">new</span> String[]&#123;PERMISSION&#125;, REQUEST_CODE);</span><br></pre></td></tr></table></figure>
<p>fragment:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fragment.requestPermissions(<span class="keyword">this</span>, <span class="keyword">new</span> String[]&#123;PERMISSION&#125;, REQUEST_CODE);</span><br></pre></td></tr></table></figure>
<p>子fragment：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getParentFragment.requestPermissions(<span class="keyword">this</span>, <span class="keyword">new</span> String[]&#123;PERMISSION&#125;, REQUEST_CODE);</span><br></pre></td></tr></table></figure>
<p>在子fragment中使用requestPermissions，onRequestPermissionsResult不会接收回调，所以使用父fragment的requestPermissions方法，然后在父fragment中透传给子fragment。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onRequestPermissionsResult</span><span class="params">(<span class="keyword">int</span> requestCode, String[] permissions, <span class="keyword">int</span>[] grantResults)</span> </span>&#123;</span><br><span class="line">      <span class="keyword">super</span>.onRequestPermissionsResult(requestCode, permissions, grantResults);</span><br><span class="line">      List&lt;Fragment&gt; fragments = getChildFragmentManager().getFragments();</span><br><span class="line">      <span class="keyword">if</span> (fragments != <span class="keyword">null</span>) &#123;</span><br><span class="line">          <span class="keyword">for</span> (Fragment fragment : fragments) &#123;</span><br><span class="line">              <span class="keyword">if</span> (fragment != <span class="keyword">null</span>) &#123;</span><br><span class="line">                  fragment.onRequestPermissionsResult(requestCode,permissions,grantResults);</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><p>app的targetSdkVersion小于23，在android6.0及以上系统上运行时，如果在设置中改变应用权限状态，app的每个界面都会重新创建；在android6.0以下运行时，由于系统中没有权限选项，不存在该问题。</p>
<p>app的targetSdkVersion大于等于23，在6.0及以上运行时，会按照运行时权限规则执行；在6.0以下运行时，会默认获得app需求的全部权限。</p>
<p>设置系统亮度和音量不需要权限；</p>
<p>华为和小米的系统在api23（6.0）一下时也会询问权限，但经过测试，小米上的权限管理貌似不起作用。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/26/2017-09-26-span/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="henry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="henry blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/26/2017-09-26-span/" itemprop="url">Span</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-26T15:30:30+08:00">
                2017-09-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/26/2017-09-26-span/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/09/26/2017-09-26-span/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="Span简介"><a href="#Span简介" class="headerlink" title="Span简介"></a>Span简介</h4><p>span的实现类可以为TextView中的文字和图片添加各种样式效果。</p>
<h4 id="常用的Span实现类"><a href="#常用的Span实现类" class="headerlink" title="常用的Span实现类"></a>常用的Span实现类</h4><ul>
<li><p>BulletSpan</p>
<p>给段落的开头添加黑原点</p>
</li>
<li><p>QuoteSpan</p>
<p>给段落开头添加竖线</p>
</li>
<li><p>AlignmentSpan</p>
<p>控制段落左对齐，右对齐，居中</p>
</li>
<li><p>UnderlineSpan</p>
<p>在文字下方添加下划线</p>
</li>
<li><p>StrikethroughSpan</p>
<p>在文字上添加删除线</p>
</li>
<li><p>BackgournColorSpan</p>
<p>文字背景颜色</p>
</li>
<li><p>ForegroundColorSpan</p>
<p>文字自己的颜色</p>
</li>
<li><p>ImageSpan</p>
<p>文字中间添加图片</p>
</li>
<li><p>StyleSpan</p>
<p>文字样式</p>
</li>
<li><p>ScaleXSpan</p>
<p>控制文字x方向上的缩放</p>
</li>
<li><p>MaskFilterSpan</p>
<p>给文字添加蒙版；BlurMaskFilter，EmbossMaskFilter</p>
</li>
</ul>
<h4 id="自定义Span"><a href="#自定义Span" class="headerlink" title="自定义Span"></a>自定义Span</h4><p>如果上面的span不能满足需求的话还可以自定span实现自定义效果，常用的方法是继承ReplacementSpan。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CustomReplaceSpan</span> <span class="keyword">extends</span> <span class="title">ReplacementSpan</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Paint mPaint;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> mWidth;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">CustomReplaceSpan</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        mPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">        mPaint.setColor(Color.RED);</span><br><span class="line">        mPaint.setStyle(Paint.Style.STROKE);</span><br><span class="line">        mPaint.setStrokeWidth(<span class="number">6</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getSize</span><span class="params">(@NonNull Paint paint, CharSequence text, @IntRange(from = <span class="number">0</span>)</span> <span class="keyword">int</span> 					start, @<span class="title">IntRange</span><span class="params">(from = <span class="number">0</span>)</span> <span class="keyword">int</span> end, @Nullable Paint.FontMetricsInt fm) </span>&#123;</span><br><span class="line">        CharSequence replace = text.subSequence(start, end);</span><br><span class="line">        <span class="keyword">float</span> width = paint.measureText(replace.toString());</span><br><span class="line">        mWidth = (<span class="keyword">int</span>) width;</span><br><span class="line">        <span class="keyword">return</span> (<span class="keyword">int</span>) width;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">(@NonNull Canvas canvas, CharSequence text, @IntRange(from = <span class="number">0</span>)</span> <span class="keyword">int</span> 					start, @<span class="title">IntRange</span><span class="params">(from = <span class="number">0</span>)</span> <span class="keyword">int</span> end, <span class="keyword">float</span> x, <span class="keyword">int</span> top, <span class="keyword">int</span> y, <span class="keyword">int</span> bottom, 					@NonNull Paint paint) </span>&#123;</span><br><span class="line">        RectF rectF = <span class="keyword">new</span> RectF(x, top, x + mWidth, bottom);</span><br><span class="line">        canvas.drawRect(rectF, mPaint);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用问题"><a href="#使用问题" class="headerlink" title="使用问题"></a>使用问题</h4><p>BulletSpan和QuoteSpan只能出现在段落的开始位置；Spand.SPAN_EXCLUSIVE_EXCLUSIVE等flag经测试效果都一样，都是会包含start，不包含end；使用MaskFilterSpan应关闭硬件加速，否则会出现界面错落。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/09/16/2017-9-16-bitmap/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="henry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="henry blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/09/16/2017-9-16-bitmap/" itemprop="url">bitmap的使用</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-09-16T15:20:02+08:00">
                2017-09-16
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/09/16/2017-9-16-bitmap/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/09/16/2017-9-16-bitmap/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>bitmap指的是一张jpg，png格式的图片。</p>
</li>
<li><h4 id="创建bitmap的几种方式"><a href="#创建bitmap的几种方式" class="headerlink" title="创建bitmap的几种方式"></a>创建bitmap的几种方式</h4><p><code>Bitmap.createBitmap(view.getMeasuredWidth(), view.getMeasuredHeight(), Bitmap.Config.ARGB_8888)</code></p>
<p>创建一个空的bitmap</p>
<p><code>Bitmap newBitmap = newBitmap.copy(Bitmap.Config.ARGB_8888, true);</code></p>
<p>拷贝一个相同的bimap</p>
<p><code>Bitmap newBitmap = Bitmap.createBitmap(bitmap, 0, 0, view.getMeasuredWidth(), view.getMeasuredHeight(), matrix, true);</code></p>
<p>对已有的bitmap进行matrix操作和指定宽高进行裁剪后生成新的bitmap</p>
<p><code>Bitmap bitmap = BitmapFactory.decodeFile(picFile.getAbsolutePath());</code></p>
<p>从磁盘中读取图片文件（读取出来的bitmap不能直接通过canvas进行操作，需要创建或copy一个新的bitmap再进行操作）</p>
</li>
<li><h4 id="bitmap的位移，缩放等操作"><a href="#bitmap的位移，缩放等操作" class="headerlink" title="bitmap的位移，缩放等操作"></a>bitmap的位移，缩放等操作</h4><p>有两种办法，第一种是在调用createBitmap函数的时候直接设置matrix；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Bitmap bitmap = BitmapFactory.decodeFile(picFile.getAbsolutePath());</span><br><span class="line">Matrix matrix = <span class="keyword">new</span> Matrix();</span><br><span class="line">matrix.postTranslate(<span class="number">100</span>, <span class="number">0</span>);</span><br><span class="line"><span class="comment">//        matrix.postScale(0.5f, 0.5f);</span></span><br><span class="line"><span class="comment">//        matrix.postRotate(90);</span></span><br><span class="line"><span class="comment">//        Bitmap newBitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(), matrix, true);</span></span><br><span class="line">Bitmap newBitmap = Bitmap.createBitmap(bitmap, <span class="number">0</span>, <span class="number">0</span>, view.getMeasuredWidth(), view.getMeasuredHeight(), matrix, <span class="keyword">true</span>);</span><br></pre></td></tr></table></figure>
<p>第二种是通过bitmap创建canvas，对canvas进行操作；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Matrix matrix = <span class="keyword">new</span> Matrix();</span><br><span class="line">matrix.setRotate(<span class="number">90</span>);</span><br><span class="line">canvas.drawBitmap(bitmap, matrix, paint);</span><br></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><h4 id="在bitmap上画图"><a href="#在bitmap上画图" class="headerlink" title="在bitmap上画图"></a>在bitmap上画图</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Bitmap bitmap = BitmapFactory.decodeFile(picFile.getAbsolutePath());</span><br><span class="line">Bitmap newBitmap = bitmap.copy(Bitmap.Config.ARGB_8888, <span class="keyword">true</span>);</span><br><span class="line">Canvas canvas = <span class="keyword">new</span> Canvas(newBitmap);</span><br><span class="line">Paint paint = <span class="keyword">new</span> Paint();</span><br><span class="line">paint.setAntiAlias(<span class="keyword">true</span>);</span><br><span class="line">paint.setTextSize(<span class="number">20</span>);</span><br><span class="line">paint.setColor(Color.BLUE);</span><br><span class="line"><span class="comment">//        canvas.drawRect(30, 60, 80, 200, paint);</span></span><br><span class="line"><span class="comment">//        canvas.rotate(45, 300, 400);</span></span><br><span class="line">canvas.drawText(<span class="string">"测试"</span>, <span class="number">300</span>, <span class="number">400</span>, paint);</span><br></pre></td></tr></table></figure>
<p>​</p>
</li>
<li><h4 id="bitmap和drawable"><a href="#bitmap和drawable" class="headerlink" title="bitmap和drawable"></a>bitmap和drawable</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Drawable newBitmapDrawable = <span class="keyword">new</span> BitmapDrawable(bitmap);</span><br><span class="line">Bitmap bitmap = <span class="keyword">new</span> BitmapDrawable.getBitmap();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 非BitmapDrawable转bitmap</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Bitmap <span class="title">drawableToBitmap</span><span class="params">(Drawable drawable)</span> </span>&#123;</span><br><span class="line">        Bitmap bitmap = Bitmap.createBitmap(</span><br><span class="line">                drawable.getIntrinsicWidth(),</span><br><span class="line">                drawable.getIntrinsicHeight(),</span><br><span class="line">                drawable.getOpacity() != PixelFormat.OPAQUE ? Bitmap.Config.ARGB_8888 : Bitmap.Config.RGB_565</span><br><span class="line">        );</span><br><span class="line">        Canvas canvas = <span class="keyword">new</span> Canvas(bitmap);</span><br><span class="line">        drawable.setBounds(<span class="number">0</span>, <span class="number">0</span>, drawable.getIntrinsicWidth(), drawable.getIntrinsicHeight());</span><br><span class="line">        drawable.draw(canvas);</span><br><span class="line">        <span class="keyword">return</span> bitmap;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="bitmap的常见用法"><a href="#bitmap的常见用法" class="headerlink" title="bitmap的常见用法"></a>bitmap的常见用法</h4><h6 id="图片合成："><a href="#图片合成：" class="headerlink" title="图片合成："></a>图片合成：</h6><p>多张图片通过canvas绘制到一起；通过canvas.drawBitmap(bitmap, src, src, paint)裁剪图片；</p>
<h6 id="制作圆角图片："><a href="#制作圆角图片：" class="headerlink" title="制作圆角图片："></a>制作圆角图片：</h6><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Bitmap <span class="title">toRoundCorner</span><span class="params">(Bitmap bitmap, <span class="keyword">int</span> pixels)</span> </span>&#123;</span><br><span class="line">        Bitmap roundCornerBitmap = Bitmap.createBitmap(bitmap.getWidth(), bitmap.getHeight(), Bitmap.Config.ARGB_8888);</span><br><span class="line">        Canvas canvas = <span class="keyword">new</span> Canvas(roundCornerBitmap);</span><br><span class="line">        <span class="keyword">int</span> color = <span class="number">0xff424242</span>;<span class="comment">// int color = 0xff424242;</span></span><br><span class="line">        Paint paint = <span class="keyword">new</span> Paint();</span><br><span class="line">        paint.setColor(color);</span><br><span class="line">        <span class="comment">// 防止锯齿</span></span><br><span class="line">        paint.setAntiAlias(<span class="keyword">true</span>);</span><br><span class="line">        Rect rect = <span class="keyword">new</span> Rect(<span class="number">0</span>, <span class="number">0</span>, bitmap.getWidth(), bitmap.getHeight());</span><br><span class="line">        RectF rectF = <span class="keyword">new</span> RectF(rect);</span><br><span class="line">        <span class="keyword">float</span> roundPx = pixels;</span><br><span class="line">        <span class="comment">// 相当于清屏</span></span><br><span class="line">        canvas.drawARGB(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">        <span class="comment">// 先画了一个带圆角的矩形</span></span><br><span class="line">        canvas.drawRoundRect(rectF, roundPx, roundPx, paint);</span><br><span class="line">        paint.setXfermode(<span class="keyword">new</span> PorterDuffXfermode(PorterDuff.Mode.SRC_IN));</span><br><span class="line">        <span class="comment">// 再把原来的bitmap画到现在的bitmap！！！注意这个理解</span></span><br><span class="line">        canvas.drawBitmap(bitmap, rect, rect, paint);</span><br><span class="line">        <span class="keyword">return</span> roundCornerBitmap;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>​</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/06/07/2017-06-07-VideoView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="henry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="henry blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/07/2017-06-07-VideoView/" itemprop="url">使用VideoView遇到的问题</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-06-07T14:51:05+08:00">
                2017-06-07
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/06/07/2017-06-07-VideoView/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/06/07/2017-06-07-VideoView/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><h4 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h4></li>
</ul>
<p>  VideoView本身是继承了SurfaceView，其内部维护了一个Mediaplayer实例，所以api和Mediaplayer的api非常相似；另外可以为VideoView加上简单的控制器，使用MediaController。</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mVideoView.setVideoPath(&quot;http://video.jiecao.fm/11/23/xin/%E5%81%87%E4%BA%BA.mp4&quot;);</span><br><span class="line">mVideoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onPrepared(MediaPlayer mp) &#123;</span><br><span class="line">                mVideoView.start();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">MediaController mediaController = new MediaController(this);</span><br><span class="line">mediaController.setMediaPlayer(mVideoView);</span><br><span class="line">mVideoView.setMediaController(mediaController);</span><br></pre></td></tr></table></figure>
<ul>
<li><h4 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h4><p>进入有VideoView的activity会黑屏；不管为VideoView设置多大的宽高，最终显示效果类似ImageView的FIT_CENTER效果；由于在onStop时SurfaceView会调用surfaceDestroyed()方法，onResume是会调用surfaceCreated()重新创建，进而导致视频会从头播放；全屏显示；</p>
</li>
<li><h4 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h4><p>黑屏根本原因没有找到，但是发现只有VideoView的父布局黑屏，解决方法可以先给VideoView设置背景，等mediaPlayer prepare完成再把背景设置透明；</p>
<p>宽高的问题，重写onMearse方法；</p>
<p>onResume之后重头播放的问题，onPause保存播放进度，onResume中调用seekTo方法；</p>
<p>surfaceView在onMearse方法中进行了特殊处理，视频本身只会撑满surfaceView宽高，不管surfaceView多大视频就撑满，为了不变形会对视频宽高和自身宽高进行等比计算出最终的宽高。</p>
</li>
<li><h4 id="更好的解决方案"><a href="#更好的解决方案" class="headerlink" title="更好的解决方案"></a>更好的解决方案</h4><p>使用TextureView+mediaPlayer，具体参考<a href="https://github.com/lipangit/JieCaoVideoPlayer" target="_blank" rel="noopener">JieCaoVideoPlayer</a></p>
<p>​</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/26/2017-05-26-gradle-tips/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="henry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="henry blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/26/2017-05-26-gradle-tips/" itemprop="url">gradle配置小技巧</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-26T15:52:16+08:00">
                2017-05-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/26/2017-05-26-gradle-tips/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/26/2017-05-26-gradle-tips/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ol>
<li><h4 id="gradle-extra"><a href="#gradle-extra" class="headerlink" title="gradle extra"></a>gradle extra</h4><p>描述问题：每次发布app新版本都会更改gradle配置文件中的versionCode和versionName，改完as就会提示我们gradle配置更改了需要sync。</p>
<p>解决问题：新建config.gradle文件，</p>
</li>
</ol>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/05/18/2017-05-18-the-first-home/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="henry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="henry blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/05/18/2017-05-18-the-first-home/" itemprop="url">人生首套房操作指南（准备篇）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-05-18T10:29:52+08:00">
                2017-05-18
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/05/18/2017-05-18-the-first-home/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/05/18/2017-05-18-the-first-home/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><h4 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h4><p>一开始有打算买房计划是在2016年6月份，萌生这个念头原因有两个，一是大学舍友刚买完房，二是房价开始了突飞猛涨产生恐慌心理；由于对房地产一无所知，再加上看了网上一些大v的评论说在房价猛涨时期买房不合适（当时自己拿不出首付，也希望等房价降一点再说，这个想法简直naive），自己又不在郑州等原因，让自己的买房计划一拖再拖，最后还是在家人的支持下铁了心买房。</p>
</li>
<li><h4 id="前期准备"><a href="#前期准备" class="headerlink" title="前期准备"></a>前期准备</h4><p>在买房之前，一直有一个想法就是想学习别人的买房经验避免自己踩坑，但最后发现作用并不是太大，好多别人的经验和看法并不适合自己，但还有有必要记录一下。</p>
<p>作为买房小白的我在网上查了许多买房相关的文章，百度，知乎，豆瓣，安居客，房天下，米宅（郑州本地楼市网站），有意在郑州置业的可以重点关注米宅，比较靠谱有良心的媒体，楼盘信息很全面，资讯报道很及时，上面还有很多业主交流和问答；另外重点说下在知乎中买的一场live，毕竟是掏了钱的，总结一下；</p>
<ol>
<li>小产权房：在农村集体土地上建设的房屋，没有房产证，尽量不要碰，没有房本房子根本没保证。</li>
<li>首付越多越好吗？现金不多，建议按首付最少的来，原因：年轻人还款能力是越来越强的，人民币是在不断贬值的，而房子是在不断增值的。</li>
<li>房价走势？关键在政府怎么看，党19大要召开，维稳是第一要素，政策和文件都存在这样的话，房子是用来住的不是用来炒，中央的政策是控一线，稳二线，活三线。</li>
<li>资金有限，是否越早买房？所在城市是否到达价格天花板。</li>
<li>先买个面积小的作为过渡，以后再换大点的房子是否合适？</li>
<li>贷款选择商贷还是公积金贷款？尽量选择公积金，毕竟利率低嘛，但是有些开发商只让用商贷。</li>
<li>异地买房，公积金如何处理？跨省公积金提取挺繁琐，具体到相关单位咨询，这里说下郑州的情况，北京缴的公积金不能转到郑州用。</li>
<li>等额本息（开始还贷少，后来越来越多），等额本金（开始还贷多，后来越来越少），推荐选择等额本息。还是不太明白怎么选择，但是自己最后选了等额本息。</li>
<li>搜房网房天下，链家在线，58房产</li>
<li>住宅房和公寓房区别？公寓房就是商住房，住宅房就是商品房。</li>
<li>公摊面积？公用建筑面积是指由整栋楼的产权人共同所有的整栋楼公用部分的建筑面积。包括：电梯井、管道井、楼梯间、垃圾道、变电室、设备间、公共门厅、过道、地下室、值班警卫室等。</li>
<li>户型？户型数？方正的户型，一胎，三居，两胎，四居。</li>
<li>一手房还是二手？买得起又等的了就买一手。</li>
<li>对置业顾问怀有戒心？有戒心是好事，但置业顾问也是人，不要有过度反击情绪；置业顾问会耍小手段？这里说一种手段，置业顾问同事会在旁边bb说一些类似房子我快要卖出去了，你别再谈了，这是常用套路，刺激你草率做决定，忽略就好；不要交大定金。</li>
<li>注意购房合同补充条款，逾期交款要交滞纳金，有些公司收，有些公司不收。</li>
<li>大卡小卡价格？大卡1万（定金，一般不能退），小卡1千（诚意金，订金，可退，现在也叫排号费）</li>
<li>排卡是什么意思？其实给买房的人排个队，你是需要交一定金额（郑州一般都是3千）的买卡钱的。到开盘的时候,如果选不到你要的房,这个排卡钱是可以退的。比方说，我在开盘之前看中了一个小区的房子，按规定我交了3000元排卡了，到开盘式，我选到我想要的房，2000元就直接转为定金了，如果选不中,2000元可以退的。</li>
<li>得房率：一般多层的建筑物得房率为88%，高层的建筑物得房率为72%，而办公楼为55%</li>
<li>楼盘是否有五证，预售证比较重要，一栋楼一个预售证。</li>
<li>商品买卖合同有公示，最后拍照记下。</li>
</ol>
</li>
<li><h4 id="考察楼盘"><a href="#考察楼盘" class="headerlink" title="考察楼盘"></a>考察楼盘</h4><p>由于人在北京，想在郑州买房，线下看一次房成本还是很大的，高铁来回600块，肉疼，我等穷屌丝哪里消费的起，有的人该说怎么不坐普通车卧铺，坐了一次一夜都睡不着，想想这钱跟房子比这大巫见小巫了，挥霍吧；</p>
<p>看房花了两天时间，其实还蛮短的，其余都是家人帮忙看的，总共看了三个楼盘：</p>
<p>绿都澜湾</p>
<p>优点：改善型，地铁房，学校好，规划好；</p>
<p>缺点：开发商名声不好，位置在三环以外（郊区），伪地铁房（楼房实际位置离地铁步行需要20-30分钟）</p>
<p>永威城</p>
<p>优点：品质好，品质好，品质好（其他真看不出有什么优点了）</p>
<p>缺点：位置差</p>
<p>招商天地华府</p>
<p>优点：品牌大，精装修</p>
<p>缺点：附近有陵园</p>
<p>看完三个楼盘之后，最满意的是招商天地华府，虽有陵园，但是这点我还是可以忍的，还有一点是招商天地华府附近的楼盘很多，并且都已经盖起来了，而绿都澜湾还是特别荒芜，俨然一副大郊区的感觉，随后我家人又看了两次，感觉都很偏远，对位置都很不满意，后来无意间在米宅上看到了正商城的楼盘信息，地理位置很不错，就果断去排了号，当时排的号码是980号，总共有478套房，这不是完全没有希望嘛，但是置业顾问小张安慰说大老远从北京跑回来，能让你买不到房吗，听了他的话感觉排号里面应该是有猫腻，于是问他有办法把号码提前吗，小张似是而非的回答会帮忙想办法，于是就这样等待着开盘那天。</p>
</li>
<li><h4 id="开盘"><a href="#开盘" class="headerlink" title="开盘"></a>开盘</h4><p>开盘前一天晚上小张跟我打电话说有靠前的排号了，20号卖我3000，当时感觉贵了点，没同意，说第二天开盘的时候再说；第二天开盘前，坐在我旁边的一个买房的小伙伴主动找我攀谈起来，他的排号是170号，但是他对楼盘不是太满意，没打算买，说可以带我进去选房，综合这些信息给我的第一感觉就是此人是黄牛，于是我就有了戒心，后来聊了一会之后发现原来是同行，都是码农，于是他同意带我进去选房，这时置业顾问小张把我叫到一旁，再次要卖给我排号，100号1000块钱，我再次表示不想买；选房开始了，买房的人像打仗一样在门口你推我挤，前面一排保安拦着在维持秩序，等叫到170号时，小张又给我打电话主动给了我150号，后来我想了一下，小张是怕我选不到心仪的房子不买了他没有提成，所以才主动给我号码，另外每个置业顾问手里都应该有很多靠前的排号，可能是排了号不买了，可能是故意留出来的号码；进场，选房，签认购书，交首付，一气呵成，开发商不留给购房者一点时间，期间没有停歇，先是贷款，交首付，贷款协议按手印。</p>
</li>
<li><h4 id="后续处理"><a href="#后续处理" class="headerlink" title="后续处理"></a>后续处理</h4><p>房管局网签之后，和开放商签正式合同，然后再和银行签贷款合同，网签是开发商的事，据说房管局一天只能办理几个，最后再说一个契税问题，契税在交房之前交上就行，契税是交给房管局的。</p>
</li>
<li><h4 id="结尾"><a href="#结尾" class="headerlink" title="结尾"></a>结尾</h4></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/18/2017-03-18-apk-sign/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="henry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="henry blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/18/2017-03-18-apk-sign/" itemprop="url">apk签名</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-18T16:05:29+08:00">
                2017-03-18
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/18/2017-03-18-apk-sign/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/18/2017-03-18-apk-sign/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>keystore分两种类型，jsk后缀的和keystore后缀，其实两者都一样，jks是androidstudio推荐的，keystore是eclipse默认的。</p>
<ol>
<li><p>首先生成keystore</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">keytool -genkey -keystore test.keystore  -alias test -keyalg RSA -validity 10000</span><br><span class="line">-keystore keystore名称</span><br><span class="line">-alias 别名（具体什么作用还不太清楚）</span><br><span class="line">-keyalg 加密方式</span><br><span class="line">-validity 期限</span><br></pre></td></tr></table></figure>
</li>
<li><p>压缩zipalign，具体还没研究，as打包默认压缩吗？</p>
</li>
<li><p>签名</p>
<p>两种方式，jarsigner和apksigner，前者是jdk工具，后者是build-tools包下面的工具（24.0.3版本之后才有）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jarsigner -keystore my.keystore -signedjar signed.apk unsigned.apk my_alias_name</span><br><span class="line">-keystore keystore的位置</span><br><span class="line">-signedjar 后跟三个参数，第一个签名后的文件路径，未签名文件路径，别名（必须和生成keystore指定的别名一致）</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apksigner sign --ks my.keystore my-app.apk</span><br><span class="line">—ks 第一个参数keystore位置，第二个参数apk文件路径</span><br></pre></td></tr></table></figure>
</li>
<li><p>验证</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jarsigner -verify -verbose my_app.apk</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apksigner verify my-app.apk</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看keystroe</p>
</li>
</ol>
   <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">keytool -list -v -keystore debug.keystore</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/17/2017-03-17-optimize-launch-time/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="henry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="henry blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/17/2017-03-17-optimize-launch-time/" itemprop="url">优化应用启动时间</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-17T16:29:26+08:00">
                2017-03-17
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/17/2017-03-17-optimize-launch-time/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/17/2017-03-17-optimize-launch-time/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><h4 id="优化应用启动时间"><a href="#优化应用启动时间" class="headerlink" title="优化应用启动时间"></a>优化应用启动时间</h4></li>
</ul>
<p>启动方式分两种：冷启动（重新创建进程，启动时间较长），热启动（后台已保留有进程，不走application的生命周期）。</p>
<p>冷启动流程：Aplication构造方法—》attachBaseContent—》onCreate—》activity构造方法—》onCreate—》渲染主题背景等属性—》onStart—》onResume—》measure—》layout—》draw</p>
<h5 id="测试启动时间"><a href="#测试启动时间" class="headerlink" title="测试启动时间"></a>测试启动时间</h5><p>adb shell am start -W [packageN</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell am start -W [packageName]/[packageName.MainActivity]</span><br></pre></td></tr></table></figure>
<h5 id="减少应用启动耗时"><a href="#减少应用启动耗时" class="headerlink" title="减少应用启动耗时"></a>减少应用启动耗时</h5><p>Application的onCreate方法中不要进行耗时操作，MainActivity中sp初始化数据太多不要放在主线程操作。</p>
<h5 id="优化应用启动时的体验"><a href="#优化应用启动时的体验" class="headerlink" title="优化应用启动时的体验"></a>优化应用启动时的体验</h5><p>欢迎界面的activity主题背景设置颜色或图片，这个背景会在显示第一帧前提前显示出来</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style name=&quot;AppTheme.Launcher&quot;&gt;</span><br><span class="line">    &lt;item name=&quot;android:windowBackground&quot;&gt;@drawable/bule&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/17/2017-03-17-note/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="henry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="henry blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/17/2017-03-17-note/" itemprop="url">零碎问题笔记，长期更新</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-17T15:20:41+08:00">
                2017-03-17
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/17/2017-03-17-note/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/17/2017-03-17-note/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><h4 id="禁用activity跳转动画的几种方式"><a href="#禁用activity跳转动画的几种方式" class="headerlink" title="禁用activity跳转动画的几种方式"></a>禁用activity跳转动画的几种方式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);</span><br><span class="line">ps：经测试不是太管用。</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;style name=&quot;noAnimTheme&quot; parent=&quot;android:Theme&quot;&gt;</span><br><span class="line">   &lt;item name=&quot;android:windowAnimationStyle&quot;&gt;@null&lt;/item&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">activity.overridePendingTransition(0, 0);</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="getDimension-、getDimensionPixelOffset-和getDimensionPixelSize-区别"><a href="#getDimension-、getDimensionPixelOffset-和getDimensionPixelSize-区别" class="headerlink" title="getDimension()、getDimensionPixelOffset()和getDimensionPixelSize()区别"></a>getDimension()、getDimensionPixelOffset()和getDimensionPixelSize()区别</h4><p>三者返回的值都相似。</p>
<p>getDimension返回的是float；</p>
<p>getDimensionPixelSize返回值是int，并且小数四舍五入；</p>
<p>getDimensionPixelOffset返回值是int，直接略去小数位，即取整。</p>
</li>
<li><h4 id="mac复制路径"><a href="#mac复制路径" class="headerlink" title="mac复制路径"></a>mac复制路径</h4><p>文件夹顶部显示完整路径名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.finder _FXShowPosixPathInTitle -bool YES</span><br></pre></td></tr></table></figure>
<p>复制路径可以用 Option+Command+C</p>
</li>
<li><h4 id="修改环境变量"><a href="#修改环境变量" class="headerlink" title="修改环境变量"></a>修改环境变量</h4><ol>
<li><p>首先创建配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch .bash_profile</span><br></pre></td></tr></table></figure>
</li>
<li><p>打开配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">open -e .bash_profile</span><br></pre></td></tr></table></figure>
</li>
<li><p>编写配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export PATH=/Users/您的用户名/文件路径/platform-tools/</span><br></pre></td></tr></table></figure>
</li>
<li><p>生效配置文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source .bash_profile</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>xml中tools属性的使用</p>
<p>tools标签是为了帮助开发者在设计视图中渲染布局时的一套方便开发者的属性，该命名并不会被打进apk包内。</p>
<ol>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools:text=&quot;Mastering ToolsNs&quot;</span><br></pre></td></tr></table></figure>
<p>使用该属性只会在设计视图中显示文字，运行时不会有该属性的存在。</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools:targetApi=&quot;M&quot;</span><br></pre></td></tr></table></figure>
<p>指定api版本，避免lint检查报错。</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;fragment tools:layout=&quot;@layout/fragment_books&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>使用以上代码可以直接在设计视图中预览fragment的布局。</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;android.support.v7.widget.RecyclerView tools:listitem=&quot;@layout/fragment_book_list_item&quot;/&gt;</span><br></pre></td></tr></table></figure>
<p>这在设计视图界面显示指定的列表item设计，另外还有<code>tools:listheader</code> 和 <code>tools:listfooter</code>可在listView中使用。</p>
</li>
<li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tools:context=&quot;.MainActivity&quot;</span><br></pre></td></tr></table></figure>
<p>如果单个xml文件多次在activity或fragment中被复用，使用此属性就告知了as哪个activity与之关联。</p>
</li>
</ol>
</li>
<li><h4 id="华为手机不打印log"><a href="#华为手机不打印log" class="headerlink" title="华为手机不打印log"></a>华为手机不打印log</h4><p>进入拨号界面输入：*#*#2846579#*#*</p>
<p>依次选择ProjectMenu—后台设置—-LOG设置—LOG开关 点击打开</p>
</li>
<li><h4 id="Fragment中的onHiddenChanged方法"><a href="#Fragment中的onHiddenChanged方法" class="headerlink" title="Fragment中的onHiddenChanged方法"></a>Fragment中的onHiddenChanged方法</h4><p>fragment第一次创建不会执行onHiddenChanged方法，onResume时也不会执行。</p>
</li>
<li><h4 id="Fragment中dialog-dismiss时onResume问题"><a href="#Fragment中dialog-dismiss时onResume问题" class="headerlink" title="Fragment中dialog dismiss时onResume问题"></a>Fragment中dialog dismiss时onResume问题</h4><p>fragment中dialog dismiss时不会调用onResume方法，如果使用DialogFragment则可以。</p>
</li>
<li><h4 id="PopupWindow实现点击外部不消失，且不占据焦点"><a href="#PopupWindow实现点击外部不消失，且不占据焦点" class="headerlink" title="PopupWindow实现点击外部不消失，且不占据焦点"></a>PopupWindow实现点击外部不消失，且不占据焦点</h4><p>设置三个方法：setFocusable(false)，setTouchable(true)，setOutsideTouchable(false)</p>
</li>
<li><h4 id="onDraw方法中最好不要创建对象"><a href="#onDraw方法中最好不要创建对象" class="headerlink" title="onDraw方法中最好不要创建对象"></a>onDraw方法中最好不要创建对象</h4><p>onDraw方法调用频繁，会不断进行创建和垃圾回收，影响ui性能。</p>
</li>
<li><h4 id="Fragment嵌套使用"><a href="#Fragment嵌套使用" class="headerlink" title="Fragment嵌套使用"></a>Fragment嵌套使用</h4><p>fragment嵌套的时候使用getChildFragmentManager来管理fragment。</p>
</li>
<li><h4 id="Retrofit和RxJava并用时需要注意的一点"><a href="#Retrofit和RxJava并用时需要注意的一点" class="headerlink" title="Retrofit和RxJava并用时需要注意的一点"></a>Retrofit和RxJava并用时需要注意的一点</h4><p>subscribe()如果使用Consumer作为参数，就必须要有两个Consumer实例作为参数，第一个处理请求成功的情况，第二个处理error的情况，如果不处理onError，无网络时会出现崩溃。</p>
</li>
<li><h4 id="Fragment事务处理commitAllowingStateLoss和commit"><a href="#Fragment事务处理commitAllowingStateLoss和commit" class="headerlink" title="Fragment事务处理commitAllowingStateLoss和commit"></a>Fragment事务处理commitAllowingStateLoss和commit</h4><p>使用commit有时会碰到Can not perform this action after onSaveInstanceState异常，建议使用commitAllowingStateLoss代替，但需要注意几点：</p>
<ol>
<li>在activity生命周期中提交事务要小心，越早越好，比如在onCreate中，避免在onActivityResult方法中提交。</li>
<li>避免在异步回调方法中执行commit，因为感知不要activity生命周期的变化。</li>
<li>使用commitAllowingStateLoss可能会造成ui状态的改变。</li>
</ol>
</li>
<li><h4 id="Activity和Fragment传递对象"><a href="#Activity和Fragment传递对象" class="headerlink" title="Activity和Fragment传递对象"></a>Activity和Fragment传递对象</h4><p>Activity通过setArguments(object)给Fragment传递对象时，object是被直接传递的，而两个activity之间通过putExtra(object)传递对象时，object是被复制了一份之后进行的传递。</p>
</li>
<li><h4 id="RxJava异常处理"><a href="#RxJava异常处理" class="headerlink" title="RxJava异常处理"></a>RxJava异常处理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.net.UnknownHostException: Unable to resolve host &quot;haojiazhang123.com&quot;: No address associated with hostname</span><br></pre></td></tr></table></figure>
<p>subscribe(Consumer&lt;? super T&gt; onNext ,Consumer&lt;? super Throwable&gt; onError)第二个onError处理不能缺少，否则就会报上面异常。                        </p>
</li>
<li><h4 id="lint检查new-api"><a href="#lint检查new-api" class="headerlink" title="lint检查new api"></a>lint检查new api</h4><p>检查newApi</p>
<p>Analyze—》run inspection by name—》calling new methods on older versions</p>
</li>
<li><h4 id="获取手机系统SDK版本"><a href="#获取手机系统SDK版本" class="headerlink" title="获取手机系统SDK版本"></a>获取手机系统SDK版本</h4><p>获取系统版本：adb shell getprop ro.build.version.release</p>
<p>获取系统api版本：adb shell getprop ro.build.version.sdk</p>
</li>
<li><h4 id="Dialog和DialogFragment的区别"><a href="#Dialog和DialogFragment的区别" class="headerlink" title="Dialog和DialogFragment的区别"></a>Dialog和DialogFragment的区别</h4><p>在不设置<code>android:configChanges=`</code>“orientation|screenSize`的情况下，旋转屏幕activity会onDestory，onCreate，如果是dialog，会抛出内存泄露的异常，并且会消失，而dialogFragment会保存状态，在旋转之后再次显示出来。</p>
</li>
<li><h4 id="设置全屏的方法"><a href="#设置全屏的方法" class="headerlink" title="设置全屏的方法"></a>设置全屏的方法</h4><ol>
<li>xml中静态注册:设置activity得theme为Theme.Light.NoTitleBar.Fullscreen</li>
<li>代码中动态设置：getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,        WindowManager.LayoutParams.FLAG_FULLSCREEN);</li>
</ol>
</li>
<li><h4 id="屏幕旋转"><a href="#屏幕旋转" class="headerlink" title="屏幕旋转"></a>屏幕旋转</h4><ol>
<li><p>不做任何处理</p>
<p>当前activity会onDestory—》onCreate。</p>
</li>
<li><p>设置固定的屏幕方向</p>
<p><code>android:screenOrientation=`</code>“landscape”<code></code>//横屏`</p>
<p><code>android:screenOrientation=`</code>“portrait”<code></code>//竖屏`</p>
</li>
<li><p>强制开启屏幕旋转效果</p>
<p>setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_FULL_SENSOR);</p>
</li>
<li><p>屏幕旋转不希望activity重建</p>
<p><code>android:configChanges=`</code>“orientation|screenSize”`</p>
<p>重载函数onConfigurationChanged</p>
</li>
</ol>
</li>
<li><h4 id="获取屏幕方向"><a href="#获取屏幕方向" class="headerlink" title="获取屏幕方向"></a>获取屏幕方向</h4><p>getWindowManager().getDefaultDisplay().getRotation();</p>
<p>Surface.ROTATION_0，Surface.ROTATION_90，Surface.ROTATION_180，Surface.ROTATION_270</p>
<p>其中，Surface.ROTATION_0 表示的是手机竖屏方向向上，后面几个以此为基准依次以顺时针90度递增。</p>
<p>这种方法的bug：它只能一次旋转90度，如果你突然一下子旋转180度，onConfigurationChanged函数不会被调用。</p>
<p>如果要判断屏幕旋转的每一个角度，使用OrientationEventListener。</p>
</li>
<li><h4 id="fragment中的setUserVisibleHint方法"><a href="#fragment中的setUserVisibleHint方法" class="headerlink" title="fragment中的setUserVisibleHint方法"></a>fragment中的setUserVisibleHint方法</h4><p>fragment显示隐藏的回调方法，显示隐藏是指在屏幕上是否可见，并且只有在Viewpager和fragment配合使用时才会调用，调用时机要先于onCreate方法；</p>
<p>和onHiddenChanged的区别：onHiddenChanged方法是在调用fragmentManager.hide()和show()之后才调用。</p>
</li>
<li><h4 id="setOffscreenPageLimit-int-limit"><a href="#setOffscreenPageLimit-int-limit" class="headerlink" title="setOffscreenPageLimit(int limit)"></a>setOffscreenPageLimit(int limit)</h4><p>limit默认是1，不能小于1。</p>
</li>
<li><h4 id="判断当前线程是否是主线程"><a href="#判断当前线程是否是主线程" class="headerlink" title="判断当前线程是否是主线程"></a>判断当前线程是否是主线程</h4><p>通过loop判断</p>
<p>Looper.myLoop() == Looper.getMainLooper();</p>
<p>通过thread判断</p>
<p>Thread.currentThread() == Looper.getMainLooper().getThread();</p>
</li>
<li><h4 id="Git提交日志规范"><a href="#Git提交日志规范" class="headerlink" title="Git提交日志规范"></a>Git提交日志规范</h4><p>在日志之前加上”Fix”, “Add”, “Change”字眼。</p>
</li>
<li><h4 id="Looper"><a href="#Looper" class="headerlink" title="Looper"></a>Looper</h4><p>每一个线程中都可以创建一个looper对象。</p>
</li>
<li><h4 id="猴子测试"><a href="#猴子测试" class="headerlink" title="猴子测试"></a>猴子测试</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">adb shell monkey -p your.package.name -v 500</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="setTranslateX"><a href="#setTranslateX" class="headerlink" title="setTranslateX"></a>setTranslateX</h4><p>setTranslateX等方法会引起view重新绘制</p>
</li>
<li><h4 id="parcelable"><a href="#parcelable" class="headerlink" title="parcelable"></a>parcelable</h4><p>被传递的parcelable对象里面还包含对象的话，也要实现parcelable接口</p>
</li>
</ul>
<ul>
<li><h4 id="FragmentPagerAdapter的问题"><a href="#FragmentPagerAdapter的问题" class="headerlink" title="FragmentPagerAdapter的问题"></a>FragmentPagerAdapter的问题</h4><p>viewpager重新设置adapter得时候，fragment数据不会刷新，原因是之前的fragment没有销毁而被复用；解决办法是在刷新之前先在adapter中把之前缓存的fragmen销毁。</p>
</li>
</ul>
<ul>
<li><h4 id="判断activity是否被销毁"><a href="#判断activity是否被销毁" class="headerlink" title="判断activity是否被销毁"></a>判断activity是否被销毁</h4><p>三个条件：activity == null，activity.isFinishing() == true，activity.isDestoryed() == true（api17以上才能用），getsupportFragmentManager().isDestoryed() == true（api17一下也可用）</p>
</li>
</ul>
<ul>
<li><h4 id="横屏activity快速finish会引起上一个activity重建"><a href="#横屏activity快速finish会引起上一个activity重建" class="headerlink" title="横屏activity快速finish会引起上一个activity重建"></a>横屏activity快速finish会引起上一个activity重建</h4><p>两个activity，第一个竖屏，第二个横屏，在创建第二activity之后立即finish返回第一个activity，第一个activity会重新oncreat，未找到具体原因。</p>
</li>
<li><h4 id="fragment-startActivity隐患"><a href="#fragment-startActivity隐患" class="headerlink" title="fragment startActivity隐患"></a>fragment startActivity隐患</h4><p>fragment宿主activity会出现null的情况，换用fragment.getContext之后还是会出现null的情况。</p>
</li>
<li><h4 id="list在遍历的过程中进行增删操作"><a href="#list在遍历的过程中进行增删操作" class="headerlink" title="list在遍历的过程中进行增删操作"></a>list在遍历的过程中进行增删操作</h4><p>不能使用for循环和forEach循环会出现，因为在循环过程中增加或删除元素会影响源数据；应使用Itarator。</p>
</li>
<li><h4 id="ViewPager-onTouch遇到的问题"><a href="#ViewPager-onTouch遇到的问题" class="headerlink" title="ViewPager onTouch遇到的问题"></a>ViewPager onTouch遇到的问题</h4><p>需求：想要捕获down，move，up事件，首先使用setOntouchLisetener，发现不能捕获down事件，因为down事件已经被childView消费掉；然后换用onIntercepterTouchEvent，不能捕获up事件，因为onIntercepterTouchEvent已经拦截了横向move事件，所以不会再拦截up事件；得出结论：继承ViewPager，重写dispatchTouchEvent事件，dispatchTouchEvent中有完整的一系列事件。</p>
</li>
<li><h4 id="exoPlayer导入问题"><a href="#exoPlayer导入问题" class="headerlink" title="exoPlayer导入问题"></a>exoPlayer导入问题</h4><p>在导入exoPlayer库的时候发现其依赖于appcompat-v7:25.4.0，该库需要从<a href="https://maven.google.com仓库中下载，所以要在应用gradle配置文件中声明：" target="_blank" rel="noopener">https://maven.google.com仓库中下载，所以要在应用gradle配置文件中声明：</a></p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        jcenter()</span><br><span class="line">        maven &#123;</span><br><span class="line">            url <span class="string">"https://maven.google.com"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="华为7-0meidaPlayer-频现outOfMemory"><a href="#华为7-0meidaPlayer-频现outOfMemory" class="headerlink" title="华为7.0meidaPlayer 频现outOfMemory"></a>华为7.0meidaPlayer 频现outOfMemory</h4><p>在使用mediaPlayer播放超过20m的视频时，会出现缓冲80%左右停止缓冲并抛异常的情况（必现）；华为7.0经常因outOfMemory崩溃，google后发现应该是系统bug。</p>
</li>
<li><h4 id="接口中不能使用静态方法"><a href="#接口中不能使用静态方法" class="headerlink" title="接口中不能使用静态方法"></a>接口中不能使用静态方法</h4></li>
<li><h4 id="getHitRect-getDrawingRect-getFocusedRect区别"><a href="#getHitRect-getDrawingRect-getFocusedRect区别" class="headerlink" title="getHitRect,getDrawingRect,getFocusedRect区别"></a>getHitRect,getDrawingRect,getFocusedRect区别</h4><p>view.getHitRect获取到的rect的坐标是相对于parentView的；getDrawingRect和getFocusedRect获取到rect的坐标是相对于view自己left和top肯定为0；</p>
</li>
<li><h4 id="dialog-show不会触发Activity的onPause方法"><a href="#dialog-show不会触发Activity的onPause方法" class="headerlink" title="dialog.show不会触发Activity的onPause方法"></a>dialog.show不会触发Activity的onPause方法</h4></li>
<li><h4 id="getLeft-getX-getTranslationX的区别"><a href="#getLeft-getX-getTranslationX的区别" class="headerlink" title="getLeft,getX,getTranslationX的区别"></a>getLeft,getX,getTranslationX的区别</h4><p>getLeft：距离parentView左边界的距离，setTranslationX之后该值不会改变。</p>
<p>getX：距离parentView左边界的距离，setTranslationX之后该值等于getLeft+getTranslationX</p>
<p>getTranslationX：setTranslationX移动的距离</p>
</li>
<li><h4 id="setTranslationX不会引起parentView重新layout"><a href="#setTranslationX不会引起parentView重新layout" class="headerlink" title="setTranslationX不会引起parentView重新layout"></a>setTranslationX不会引起parentView重新layout</h4></li>
<li><h4 id="drawable的缩放"><a href="#drawable的缩放" class="headerlink" title="drawable的缩放"></a>drawable的缩放</h4><p>先把drawable转化为bitmap，对bitmap进行缩放，再转回drawable。</p>
</li>
<li><h4 id="canvas-setLayer"><a href="#canvas-setLayer" class="headerlink" title="canvas.setLayer"></a>canvas.setLayer</h4><p>创建新的透明图层，在新的图层上绘制不会直接绘制到屏幕上，而会在restroe之后绘制到上一个图层或者屏幕上；为什么需要一个新的图层，例如使用xfermMode的时候原canvas上的图（包括背景）会影响到src和dst的合成；又例如需要在图层上绘制几个带有透明图的图形，那么可以创建一个带有透明度的图层。</p>
</li>
<li><h4 id="abi问题"><a href="#abi问题" class="headerlink" title="abi问题"></a>abi问题</h4><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">splits &#123;</span><br><span class="line">        abi &#123;</span><br><span class="line">            enable <span class="literal">true</span></span><br><span class="line">            reset()</span><br><span class="line">            include <span class="string">'armeabi'</span></span><br><span class="line">            universalApk <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>enable默认为false，enable后面的语句都不执行；enable为false时打包只会生成一个apk，apk中包含所有类型的指令集文件夹；enable为true时会根据include中的指令集列表生成多个apk；universalApk默认为false，为true时会多生成一个包含所有指令集文件夹的apk；</p>
</li>
<li><p>####onResume时会再次执行onDraw</p>
</li>
<li><p>####checked的使用</p>
<p>textView和imageView本身是不具备checked功能的，可实现Checkable接口加上checked功能；实现Checkable典型代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>[] CHECK_STATE = <span class="keyword">new</span> <span class="keyword">int</span>[]&#123;android.R.attr.state_checked&#125;;</span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span>[] onCreateDrawableState(<span class="keyword">int</span> extraSpace) &#123;</span><br><span class="line">        <span class="keyword">int</span>[] states = <span class="keyword">super</span>.onCreateDrawableState(extraSpace + <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (isChecked()) &#123;</span><br><span class="line">            mergeDrawableStates(states, CHECK_STATE);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> states;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setChecked</span><span class="params">(<span class="keyword">boolean</span> checked)</span> </span>&#123;</span><br><span class="line">        mChecked = checked;</span><br><span class="line">        refreshDrawableState();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isChecked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> mChecked;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">toggle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        setChecked(!mChecked);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>多说两句自定义drawable state的问题，类似实现checked：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">resources</span>&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">declare-styleable</span> <span class="attr">name</span>=<span class="string">"MessageStatus"</span>&gt;</span>  </span><br><span class="line">        <span class="tag">&lt;<span class="name">attr</span> <span class="attr">name</span>=<span class="string">"state_message_readed"</span> <span class="attr">format</span>=<span class="string">"boolean"</span> /&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;/<span class="name">declare-styleable</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">resources</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span>[] STATE_MESSAGE_READED = &#123; R.attr.state_message_readed &#125;;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setMessageReaded</span><span class="params">(<span class="keyword">boolean</span> readed)</span>  </span></span><br><span class="line"><span class="function">    </span>&#123;  </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.mMessgeReaded != readed)  </span><br><span class="line">        &#123;  </span><br><span class="line">            mMessgeReaded = readed;  </span><br><span class="line">            refreshDrawableState();  </span><br><span class="line">        &#125;  </span><br><span class="line">    &#125;  </span><br><span class="line">  </span><br><span class="line">    <span class="meta">@Override</span>  </span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">int</span>[] onCreateDrawableState(<span class="keyword">int</span> extraSpace)  </span><br><span class="line">    &#123;  </span><br><span class="line">        <span class="keyword">if</span> (mMessgeReaded)  </span><br><span class="line">        &#123;  </span><br><span class="line">            <span class="keyword">final</span> <span class="keyword">int</span>[] drawableState = <span class="keyword">super</span>  </span><br><span class="line">                    .onCreateDrawableState(extraSpace + <span class="number">1</span>);  </span><br><span class="line">            mergeDrawableStates(drawableState, STATE_MESSAGE_READED);  </span><br><span class="line">            <span class="keyword">return</span> drawableState;  </span><br><span class="line">        &#125;  </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.onCreateDrawableState(extraSpace);  </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
</li>
<li><h4 id="resource-gt-gt-color文件夹下的selector文件只能针对有color属性的view"><a href="#resource-gt-gt-color文件夹下的selector文件只能针对有color属性的view" class="headerlink" title="resource&gt;&gt;color文件夹下的selector文件只能针对有color属性的view"></a>resource&gt;&gt;color文件夹下的selector文件只能针对有color属性的view</h4></li>
<li><p>####view默认是不能点击的，即clickable为false</p>
</li>
<li><p>####performClick中执行了onClickListener回调方法</p>
</li>
<li><p>####TextWatcher会监听TextView的变化</p>
</li>
<li><p>####setTintMode,setTint</p>
<p>tint顾名思义色彩，setTintMode和setTint一般配合bitmapDrawable一起使用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Bitmap bitmap = BitmapFactory.decodeFile(picFile.getAbsolutePath());</span><br><span class="line">BitmapDrawable bitmapDrawable = <span class="keyword">new</span> BitmapDrawable(getResources(), bitmap);</span><br><span class="line"><span class="comment">//        bitmapDrawable.setTintMode(PorterDuff.Mode.SRC_IN);</span></span><br><span class="line"><span class="comment">//        bitmapDrawable.setTint(Color.RED);</span></span><br><span class="line">DrawableCompat.setTintMode(bitmapDrawable, PorterDuff.Mode.DST_ATOP);</span><br><span class="line">DrawableCompat.setTint(bitmapDrawable, Color.RED);</span><br><span class="line">imageView.setImageDrawable(bitmapDrawable);</span><br></pre></td></tr></table></figure>
<p>使用场景：一张图片需要在应用中展示多种颜色，可通过该方式给图片换颜色。</p>
<p>tip：setTintMode和setTint方法是api21才加的，推荐使用DrawableCompat.setTintMode。</p>
</li>
<li><p>####bitmapShader</p>
<p>图片着色器，一般配合paint使用，典型代码如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mBitmap = BitmapFactory.decodeFile(picFile.getAbsolutePath());</span><br><span class="line">mPaint = <span class="keyword">new</span> Paint();</span><br><span class="line">BitmapShader bitmapShader = <span class="keyword">new</span> BitmapShader(mBitmap, Shader.TileMode.REPEAT, 										Shader.TileMode.REPEAT);</span><br><span class="line">mPaint.setShader(bitmapShader);</span><br><span class="line"></span><br><span class="line">canvas.drawCircle(x, y, radius, mPaint);</span><br></pre></td></tr></table></figure>
<p>使用场景：绘制圆角图片或圆形图片等特殊形状图片。</p>
</li>
<li><p>####colorFilter</p>
<p>有三个子类：colorMatrixColorFilter，LightingColorFilter，PortDuffColorFilter；掌握colorFilter的使用需先掌握矩阵运算。</p>
<p>使用场景：给图片加滤镜。</p>
</li>
<li><p>####启动应用白屏</p>
<p>先定义一个layerDrawable，再设置给activity的主题style中的背景属性。</p>
</li>
<li><p>####硬件加速导致的问题</p>
<p>硬件加速能使用GPU来加速2D图片的渲染，但硬件加速并不能完全支持所有的渲染操作，比较复杂的自定义View可能会导致硬件加速渲染出错；硬件加速是api11之后才有，api14之后硬件加速是默认开启的</p>
<p>硬件加速开关</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">application</span> <span class="attr">android:hardwareAccelerated</span>=<span class="string">"true"</span> <span class="attr">...</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">application</span> <span class="attr">android:hardwareAccelerated</span>=<span class="string">"true"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activity</span> <span class="attr">...</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">activity</span> <span class="attr">android:hardwareAccelerated</span>=<span class="string">"false"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">application</span>&gt;</span></span><br><span class="line"></span><br><span class="line">getWindow().setFlags(</span><br><span class="line">    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED,</span><br><span class="line">    WindowManager.LayoutParams.FLAG_HARDWARE_ACCELERATED);</span><br><span class="line">    </span><br><span class="line">myView.setLayerType(View.LAYER_TYPE_SOFTWARE, null);</span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">LinearLayout</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"fill_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"fill_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:orientation</span>=<span class="string">"vertical"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingLeft</span>=<span class="string">"2dp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layerType</span>=<span class="string">"software"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:paddingRight</span>=<span class="string">"2dp"</span> &gt;</span></span><br></pre></td></tr></table></figure>
<p>判断是否开启了硬件加速</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">View.isHardwareAccelerated()</span><br><span class="line">Canvas.isHardwareAccelerated()</span><br></pre></td></tr></table></figure>
</li>
<li><p>###转场动画</p>
<p>前提条件：</p>
<p>1.在style中启用内容转换</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">item</span> <span class="attr">name</span>=<span class="string">"android:windowContentTransitions"</span>&gt;</span>true<span class="tag">&lt;/<span class="name">item</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>或者在acitivity2代码中启用：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">getWindow().requestFeature(Window.FEATURE_CONTENT_TRANSITIONS);</span><br></pre></td></tr></table></figure>
<p>activity1不用开启。</p>
<p>2.利用 <code>android:transitionName</code> 属性对两个布局中的共享元素指定一个通用名称。</p>
<p>3.使用 <code>ActivityOptions.makeSceneTransitionAnimation()</code> 方法，第三个参数要和2中的transitionName保持一致。</p>
<p>注意：</p>
<h6 id="如果使用共享元素动画一定要开启硬件加速（真的坑，花了一下午才发现这个问题，官方文档都作说明）；"><a href="#如果使用共享元素动画一定要开启硬件加速（真的坑，花了一下午才发现这个问题，官方文档都作说明）；" class="headerlink" title="如果使用共享元素动画一定要开启硬件加速（真的坑，花了一下午才发现这个问题，官方文档都作说明）；"></a>如果使用共享元素动画一定要开启硬件加速（真的坑，花了一下午才发现这个问题，官方文档都作说明）；</h6></li>
<li><p>###</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/17/2017-03-17-TableLayout-question/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="henry">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="henry blog">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/03/17/2017-03-17-TableLayout-question/" itemprop="url">使用TableLayout遇到的坑</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2017-03-17T11:12:13+08:00">
                2017-03-17
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2017/03/17/2017-03-17-TableLayout-question/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/03/17/2017-03-17-TableLayout-question/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><h4 id="前请概要："><a href="#前请概要：" class="headerlink" title="前请概要："></a>前请概要：</h4></li>
</ul>
<p>项目中用到用TableLayout画表格，遇到不少坑，总结一下。</p>
<ul>
<li><h4 id="行和列match-parent无效果"><a href="#行和列match-parent无效果" class="headerlink" title="行和列match_parent无效果"></a>行和列match_parent无效果</h4></li>
</ul>
<p>为row何column设置match_parent没有效果，和wrap_content一样，但可以设置固定尺寸，如果要想match_parent有两种办法，1：设置weight    2：设置stretchColumns；需要注意设置stretchColumns之后，divider效果就会出问题（end不显示），尽量不要使用stretchColumns。</p>
<ul>
<li><h4 id="layout-span的问题"><a href="#layout-span的问题" class="headerlink" title="layout_span的问题"></a>layout_span的问题</h4></li>
</ul>
<p>wrap_content和layout_span配合起来没问题，但match_parent配合layout_span就达不到理想效果，推荐用weight来实现match_parent的效果</p>
<ul>
<li><h4 id="divider的问题"><a href="#divider的问题" class="headerlink" title="divider的问题"></a>divider的问题</h4></li>
</ul>
<p>因为TableLayout是继承LinearLayout，所以也是支持showDividers属性的，正常使用没什么问题，但是和stretchColumns属性配合使用会导致end不显示分割线。</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="henry" />
            
              <p class="site-author-name" itemprop="name">henry</p>
              <p class="site-description motion-element" itemprop="description">吾生也有涯，而知也无涯</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">26</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">1</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">标签</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">henry</span>

  
</div>


  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"henry-newbie"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  


















  





  

  

  

  
  

  

  

  

</body>
</html>
